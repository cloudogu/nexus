{
  "Name": "official/nexus",
  "Version": "3.40.1-1",
  "DisplayName": "Sonatype Nexus",
  "Description": "The Nexus Repository is like the local warehouse where all of the parts and finished goods used in your software supply chain are stored and distributed.",
  "Url": "http://www.sonatype.org/nexus",
  "Logo": "https://cloudogu.com/images/dogus/nexus.png",
  "Category": "Development Apps",
  "Tags": [
    "warp",
    "build",
    "artifact",
    "maven"
  ],
  "Image": "registry.cloudogu.com/official/nexus",
  "Dependencies": [
    {
      "type": "dogu",
      "name": "cas"
    },
    {
      "type": "dogu",
      "name": "nginx"
    },
    {
      "type": "dogu",
      "name": "postfix"
    }
  ],
  "Volumes": [
    {
      "Name": "data",
      "Path": "/var/lib/nexus",
      "Owner": "1000",
      "Group": "1000",
      "NeedsBackup": true
    },
    {
      "Name": "migration",
      "Path": "/var/lib/migration",
      "Owner": "1000",
      "Group": "1000",
      "NeedsBackup": true
    }
  ],
  "ExposedCommands": [
    {
      "Name": "service-account-create",
      "Description": "Creates a new service account",
      "Command": "/create-sa.sh"
    },
    {
      "Name": "service-account-remove",
      "Description": "Removes a service account",
      "Command": "/remove-sa.sh"
    },
    {
      "Name": "pre-upgrade",
      "Command": "/pre-upgrade.sh"
    },
    {
      "Name": "upgrade-notification",
      "Command": "/upgrade-notification.sh"
    }
  ],
  "Configuration": [
    {
      "Name": "nexus.repository.sandbox.enable",
      "Description": "Enable repository sandboxing",
      "Optional": true
    },
    {
      "Name": "installDefaultDockerRegistry",
      "Description": "If set to false, the default docker registry is not installed",
      "Optional": true
    },
    {
      "Name": "disableOutreachManagement",
      "Description": "Disable the outreach management capability",
      "Optional": true
    },
    {
      "Name": "logging/root",
      "Description": "Set the root log level to one of ERROR, WARN, INFO, DEBUG.",
      "Optional": true,
      "Default": "WARN",
      "Validation": {
        "Type": "ONE_OF",
        "Values": [
          "WARN",
          "DEBUG",
          "INFO",
          "ERROR"
        ]
      }
    },
    {
      "Name": "container_config/memory_limit",
      "Description": "Limits the container's memory usage. Use a positive integer value followed by one of these units [b,k,m,g] (byte, kibibyte, mebibyte, gibibyte). We recommend to add 50m for additional tools running inside the container.",
      "Optional": true,
      "Validation": {
        "Type": "BINARY_MEASUREMENT"
      }
    },
    {
      "Name": "container_config/swap_limit",
      "Description": "Limits the container's swap memory usage. Use zero or a positive integer value followed by one of these units [b,k,m,g] (byte, kibibyte, mebibyte, gibibyte). 0 will disable swapping.",
      "Optional": true,
      "Validation": {
        "Type": "BINARY_MEASUREMENT"
      }
    },
    {
      "Name": "container_config/java_max_ram_percentage",
      "Description": "Limits the heap stack size of the Nexus process to the configured percentage of the available physical memory when the container has more than approx. 250 MB of memory available. Is only considered when a memory_limit is set. Use a valid float value with decimals between 0 and 100 (f. ex. 55.0 for 55%). Default value for Nexus: 25%",
      "Optional": true,
      "Default": "25.0",
      "Validation": {
        "Type": "FLOAT_PERCENTAGE_HUNDRED"
      }
    },
    {
      "Name": "container_config/java_min_ram_percentage",
      "Description": "Limits the heap stack size of the Nexus process to the configured percentage of the available physical memory when the container has less than approx. 250 MB of memory available. Is only considered when a memory_limit is set. Use a valid float value with decimals between 0 and 100 (f. ex. 55.0 for 55%). Default value for Nexus: 50%",
      "Optional": true,
      "Default": "50.0",
      "Validation": {
        "Type": "FLOAT_PERCENTAGE_HUNDRED"
      }
    },
    {
      "Name": "cleanup_policy/notes",
      "Description": "Notes to the default cleanup-policy.",
      "Optional": true,
      "Default": "Default policy that is generated by the ces via a script on nexus startup"
    },
    {
      "Name": "cleanup_policy/mode",
      "Description": "Mode to the default cleanup-policy.",
      "Optional": true,
      "Default": "deletion"
    },
    {
      "Name": "cleanup_policy/policy_format",
      "Description": "Repository format on which the default cleanup-policy can be applied",
      "Optional": true,
      "Default": "maven2",
      "Validation": {
        "Type": "ONE_OF",
        "Values": [
          "apt",
          "bower",
          "cocoapods",
          "conan",
          "conda",
          "docker",
          "gitlfs",
          "go",
          "helm",
          "maven2",
          "npm",
          "nuget",
          "p2",
          "pypi",
          "r",
          "raw",
          "rubygems",
          "yum"
        ]
      }
    },
    {
      "Name": "cleanup_policy/criteria/regex",
      "Description": "Regex which will be used to match fitting artifacts.",
      "Optional": true,
      "Default": ".*SNAPSHOT"
    },
    {
      "Name": "cleanup_policy/criteria/release_type",
      "Description": "The release type on which this policy will be applied. This configuration is mainly used for maven repositories.",
      "Optional": true,
      "Default": "PRERELEASES"
    },
    {
      "Name": "cleanup_policy/criteria/last_blob_updated",
      "Description": "The time after which a artifact is recognised for deletion. Keep in Mind to use a STRING value not a number. This configuration is mainly used for maven repositories.",
      "Optional": true,
      "Default": "14"
    },
    {
      "Name": "compact_blobstore_task/enabled",
      "Description": "Type of a Task",
      "Optional": true,
      "Default": "true",
      "Validation": {
        "Type": "ONE_OF",
        "Values": [
          "true",
          "false"
        ]
      }
    },
    {
      "Name": "compact_blobstore_task/blobstore",
      "Description": "The concrete blobstore instance that the task should be applied. This is configuration should only be used if the task type is \"blobstore.compact\" (or other tasks that need to choose a blobstore instance).",
      "Optional": true,
      "Default": "default"
    },
    {
      "Name": "compact_blobstore_task/name",
      "Description": "The name of the task that will be displayed in the task configuration of nexus.",
      "Optional": true,
      "Default": "Compact blobstore"
    },
    {
      "Name": "compact_blobstore_task/cron",
      "Description": "Cron string that tells the task when it should be scheduled. The default value will run the task daily at 3:00 AM.",
      "Optional": true,
      "Default": "0 3 * * *"
    }
  ],
  "HealthChecks": [
    {
      "Type": "tcp",
      "Port": 8082
    },
    {
      "Type": "state"
    }
  ]
}
